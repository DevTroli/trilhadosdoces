<!doctype html>
<html lang="pt-BR">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Pedido - Trilha dos Doces</title>
  <link rel="stylesheet" href="css/base.css" />
  <link rel="stylesheet" href="css/pedido.css" />
</head>

<body>
  <header class="pedido-header">
    <div class="container pedido-header__content">
      <a href="index.html" class="pedido-header__logo">
        <img src="https://servidor-estaticos-ashy.vercel.app/trilhadoces.svg" alt="Trilha dos Doces" />
      </a>
      <span class="pedido-header__titulo">Resumo do pedido</span>
    </div>
  </header>
  <main class="pedido-page container">
    <section class="pedido-produtos">
      <h1 class="section-title">Monte seu pedido</h1>

      <div class="cards" id="listaProdutos">
        <!-- Produtos serÃ£o inseridos aqui via JavaScript -->
      </div>
    </section>

    <aside class="pedido-carrinho">
      <h2>Seu pedido</h2>
      <ul class="pedido-lista" id="listaPedido">
        <!-- itens adicionados via JS -->
      </ul>

      <p class="pedido-total">Total: <span id="totalPedido">R$ 0,00</span></p>

      <button id="btnFinalizar" class="btn btn--primary">
        Finalizar pedido
      </button>
      <p class="pedido-msg" id="mensagemPedido" aria-live="polite"></p>
    </aside>
  </main>

  <script src="js/db.js"></script>
  <script src="js/auth.js"></script>
  <script src="js/produtos.js"></script>
  <script src="js/pedido.js"></script>
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const usuario = Auth.getUsuarioLogado();
      if (usuario) {
        const headerContent = document.querySelector(
          ".pedido-header__content",
        );
        const statusSpan = document.createElement("span");
        statusSpan.className = "pedido-header__status";
        statusSpan.textContent = usuario.isAdmin
          ? "ðŸ‘‘ Admin"
          : `OlÃ¡, ${usuario.nome}`;
        headerContent.appendChild(statusSpan);
      }

      ProdutosUI.renderizar("listaProdutos");

      setTimeout(() => {
        console.log("âœ… Produtos renderizados");
      }, 100);
    });
  </script>
</body>

</html>
